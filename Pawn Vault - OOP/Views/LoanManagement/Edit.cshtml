@model Pawn_Vault___OOP.Models.Loan
@using Pawn_Vault___OOP.Models

<div class="min-h-screen flex flex-col justify-center items-center bg-gray-50 py-8">
    <div class="w-full max-w-3xl bg-white rounded-2xl shadow p-8">
        @using (Html.BeginForm("Edit", "LoanManagement", new { id = Model.LoanID }, FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.LoanID)
            @Html.HiddenFor(m => m.UserId)
            @Html.HiddenFor(m => m.TransactionCode)
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Customer Information -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Customer Information</h2>
                    <div>
                        <label asp-for="CustomerID" class="block text-sm font-medium text-gray-700 mb-1">Customer</label>
                        @Html.DropDownListFor(m => m.CustomerID, (SelectList)ViewBag.Customers, "-- Select Customer --", new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.CustomerID, "", new { @class = "text-red-500 text-sm" })
                    </div>
                </div>
                <!-- Loan Details -->
                <div class="space-y-4">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Loan Details</h2>
                    <div>
                        <label asp-for="ItemName" class="block text-sm font-medium text-gray-700 mb-1">Item Name</label>
                        @Html.TextBoxFor(m => m.ItemName, new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.ItemName, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="Description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        @Html.TextBoxFor(m => m.Description, new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.Description, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="Amount" class="block text-sm font-medium text-gray-700 mb-1">Loan Amount</label>
                        @Html.TextBoxFor(m => m.Amount, new { type = "number", step = "0.01", @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.Amount, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="EstimatedValue" class="block text-sm font-medium text-gray-700 mb-1">Estimated Value</label>
                        @Html.TextBoxFor(m => m.EstimatedValue, new { type = "number", step = "0.01", @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.EstimatedValue, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="InterestRate" class="block text-sm font-medium text-gray-700 mb-1">Interest Rate (%)</label>
                        @Html.TextBoxFor(m => m.InterestRate, new { type = "number", step = "0.01", @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.InterestRate, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="RetentionPeriod" class="block text-sm font-medium text-gray-700 mb-1">Retention Period (days)</label>
                        @Html.TextBoxFor(m => m.RetentionPeriod, new { type = "number", min = "0", @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.RetentionPeriod, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="DueDate" class="block text-sm font-medium text-gray-700 mb-1">Due Date</label>
                        @Html.TextBoxFor(m => m.DueDate, new { type = "date", @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.DueDate, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="Status" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                        @Html.DropDownListFor(m => m.Status, new SelectList(new[] { "Active", "Overdue", "Paid" }, Model.Status), new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.Status, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="Category" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        @Html.DropDownListFor(m => m.Category, new SelectList(new[] { "Watch", "Jewelry", "Electronics", "Gold", "Other" }, Model.Category), "-- Select Category --", new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.Category, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div>
                        <label asp-for="Condition" class="block text-sm font-medium text-gray-700 mb-1">Condition</label>
                        @Html.DropDownListFor(m => m.Condition, new SelectList(new[] { "Excellent", "Good", "Fair", "Poor" }, Model.Condition), "-- Select Condition --", new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" })
                        @Html.ValidationMessageFor(m => m.Condition, "", new { @class = "text-red-500 text-sm" })
                    </div>
                    <div class="space-y-4">
                        <label asp-for="TransactionCode" class="block text-sm font-medium text-gray-700 mb-1">Transaction Code</label>
                        @Html.TextBoxFor(m => m.TransactionCode, new { @class = "w-full border border-gray-300 rounded-lg py-2 px-4 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500", @readonly = "readonly" })
                        @Html.ValidationMessageFor(m => m.TransactionCode, "", new { @class = "text-red-500 text-sm" })
                    </div>
                </div>
            </div> <!-- Close grid-cols-1 md:grid-cols-2 gap-8 -->
            <div class="flex justify-end gap-4 mt-8">
                <button type="button" onclick="window.location.href='/LoanManagement'" 
                        class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2">
                    Cancel
                </button>
                <button type="submit" 
                        class="px-6 py-2 bg-yellow-500 text-white rounded-lg font-semibold hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2">
                    Save Changes
                </button>
            </div>
        }
    </div>
</div>